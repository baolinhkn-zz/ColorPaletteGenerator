<html>
	<head>
		<link rel="stylesheet" href="style.css">
	</head>
	<body>

	<div class="old-colors" id = "old-colors">
		<h1>Choose a color:</h1>
	 	<div class="original1" id="original_1">
		<div id="hover-content">
		</div>
	 </div>
	 <div class="original2" id="original_2">
		 <div id="hover-content2">
		 </div>
	 </div>
	 <div class="original3" id="original_3">
		 <div id="hover-content3">
		 </div>
	 </div>

	 <form>
		 <div class="dropdownHeader" id="drop_down">
		 Type of palette
	 </div>
	<select id="mySelect">
  	<option value="regular">regular</option>
  	<option value="pastel">pastel</option>
	</select>
	</form>

	 <div class="new-colors" id = "new-colors">
		 <div class="color1" id = "color_1">
			 <div id="new-hover-content">
			 </div>
		 </div>
		 <div class="color2" id = "color_2">
			 <div id="new-hover-content2">
			 </div>
		 </div>
		 <div class="color3" id = "color_3">
			 <div id="new-hover-content3">
			 </div>
		 </div>
		 <div class="color4" id = "color_4">
			 <div id="new-hover-content4">
			 </div>
		</div>
		 </div>
	 </div>

	<p id = "demo"> </p>
		<script>
			function color(r, g, b)
			{
				this.red = r;
				this.green = g;
				this.blue = b;
				this.hex = "#" + rgbToHex(r, g, b);
			}
			function rgbToHex(R,G,B) {return toHex(R)+toHex(G)+toHex(B)}
			function toHex(n) {
				 n = parseInt(n,10);
				 if (isNaN(n)) return "00";
				 n = Math.max(0,Math.min(n,255));
				 return "0123456789ABCDEF".charAt((n-n%16)/16)
				      + "0123456789ABCDEF".charAt(n%16);
			}
			var randColor1 = new color(Math.floor(Math.random()*256), Math.floor(Math.random()*256), Math.floor(Math.random()*256));
			var randColor2 = new color(Math.floor(Math.random()*256), Math.floor(Math.random()*256), Math.floor(Math.random()*256));
			var randColor3 = new color(Math.floor(Math.random()*256), Math.floor(Math.random()*256), Math.floor(Math.random()*256));
			var colors = [randColor1, randColor2, randColor3];
			var textcolors  = [];
			var newColors = [];
			var chosen;
			for (i = 0; i < 3; i++)
			{
				generateLighterColor(colors[i], i);
			}
			var color1 = "#" + rgbToHex(randColor1.red, randColor1.green, randColor1.blue);
			document.getElementById("original_1").style.background = color1;
			document.getElementById("hover-content").innerHTML = color1;
			document.getElementById("hover-content").style.color = textcolors[0].hex;
			var color2 = "#" + rgbToHex(randColor2.red, randColor2.green, randColor2.blue);
			document.getElementById("original_2").style.background = color2;
			document.getElementById("hover-content2").innerHTML = color2;
			document.getElementById("hover-content2").style.color = textcolors[1].hex;
			var color3 = "#" + rgbToHex(randColor3.red, randColor3.green, randColor3.blue);
			document.getElementById("original_3").style.background = color3;
			document.getElementById("hover-content3").innerHTML = color3;
			document.getElementById("hover-content3").style.color = textcolors[2].hex;
			document.getElementById("original_1").addEventListener("click", Color1);
			document.getElementById("original_2").addEventListener("click", Color2);
			document.getElementById("original_3").addEventListener("click", Color3);
			function Color1()
			{
				var selection = document.getElementById("mySelect").value;
				if (selection == "pastel") {
					pastel = true;
				}
				else
				{
					pastel = false;
				}
				chosen = 0;
				for (i = 0; i < 4; i++)
				{
					generateColors(chosen, i);
				}
				for (j = 0; j < 4; j++)
				{
					while (newColors[j].hex == "#FFFFFF" || newColors[j].hex == "#000000")
					{
						generateColors(chosen, j);
					}
				}
				setColors(chosen)
			}
			function Color2()
			{
				var selection = document.getElementById("mySelect").value;
				if (selection == "pastel") {
					pastel = true;
				}
				else
				{
					pastel = false;
				}
				chosen = 1;
				for (i = 0; i < 4; i++)
				{
					generateColors(chosen, i);
				}
				for (j = 0; j < 4; j++)
				{
					while (newColors[j].hex == "#FFFFFF" || newColors[j].hex == "#000000")
					{
						generateColors(chosen, j);
					}
				}
				setColors(chosen)
			}
			function Color3()
			{
				var selection = document.getElementById("mySelect").value;
				if (selection == "pastel") {
					pastel = true;
				}
				else
				{
					pastel = false;
				}
				chosen = 2;
				for (i = 0; i < 4; i++)
				{
					generateColors(chosen, i);
				}
				for (j = 0; j < 4; j++)
				{
					while (newColors[j].hex == "#FFFFFF" || newColors[j].hex == "#000000")
					{
						generateColors(chosen, j);
					}
				}
				setColors(chosen)
			}

			var white = new color(255, 255, 255);
			function generateLighterColor(c, k)
			{
				var red = (c.red + 255)	/ 2;
				var green = (c.green + 255) / 2;
				var blue = (c.blue + 255) / 2;
				var lc = new color(red, green, blue);
				textcolors[k] = lc;
			}
			var pastel = false;
			function setColors(j)
			{
				document.getElementById("color_1").style.background = newColors[0].hex;
				document.getElementById("color_2").style.background = newColors[1].hex;
				document.getElementById("color_3").style.background = newColors[2].hex;
				document.getElementById("color_4").style.background = newColors[3].hex;
				document.getElementById("new-hover-content").innerHTML = newColors[0].hex;
				document.getElementById("new-hover-content2").innerHTML = newColors[1].hex;
				document.getElementById("new-hover-content3").innerHTML = newColors[2].hex;
				document.getElementById("new-hover-content4").innerHTML = newColors[3].hex;
				for (i = 0; i < 4; i++)
				{
					generateLighterColor(newColors[i], i);
				}
				document.getElementById("new-hover-content").style.color = textcolors[0].hex;
				document.getElementById("new-hover-content2").style.color = textcolors[1].hex;
				document.getElementById("new-hover-content3").style.color = textcolors[2].hex;
				document.getElementById("new-hover-content4").style.color = textcolors[3].hex;
			}

			function generateColors(choice, k)
			{
				var r = Math.random()*256;
				var g = Math.random()*256;
				var b = Math.random()*256;
				r = (r + colors[choice].red)/2;
				g = (g + colors[choice].green)/2;
				b = (b + colors[choice].blue)/2;
				if (pastel) {
					console.log("hi");
					r = (r + white.red)/2;
					g = (g + white.green)/2;
					b = (b + white.blue)/2;
				}
				var newColor = new color(r, g, b);
				newColors[k] = newColor;
			}
		</script>
	</body>
</html>
